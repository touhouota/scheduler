<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>timer test</title>
	<script type="text/javascript" src="./js/base.js">
	</script>
	<script type="text/javascript">
		function control_timer() {
			timer_dom = document.getElementById("timer_test");
			if (timer_dom.getAttribute("data-timer_id") == null) {
				timer_dom.dataset.start = Date();
				timer_dom.dataset.timer_id = setInterval(function() {
					timer_dom.textContent = timer_display();
				}, 1000);
			} else {
				clearInterval(Number(timer_dom.getAttribute("data-timer_id")));
				timer_dom.removeAttribute("data-timer_id");
			}
		}

		function timer_display() {
			// 現在時刻との差分を秒で求める
			var diff = (Date.parse(Date()) - Date.parse(timer_dom.dataset.start)) / 1000;

			var hour, min, sec;
			hour = Math.floor(diff / 3600);
			if (hour < 10) {
				hour = [0, hour].join("");
			}
			diff -= hour * 3600;
			min = Math.floor(diff / 60);
			if (min < 10) {
				min = [0, min].join("");
			}
			diff -= min * 60;
			sec = Math.floor(diff);
			if (sec < 10) {
				sec = [0, sec].join("");
			}

			return [hour, min, sec].join(":");
		}
	</script>
</head>

<body>
	<div class="test">
		<button type="button" name="button" onclick="control_timer()">Start</button>
		<span id="timer_test">00:00:00</span>
	</div>
</body>

</html>
